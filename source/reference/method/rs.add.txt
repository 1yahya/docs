========
rs.add()
========

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Definition
----------

.. method:: rs.add(host, arbiterOnly)

   Adds a member to a :term:`replica set`.


   .. list-table::
      :header-rows: 1
      :widths: 20 20 80
   
      * - Parameter
   
        - Type
   
        - Description
   
      * - ``host``
   
        - string or document
   
        - The new member to add to the replica set. If a string, specify the
          hostname and optionally the port number for the new member. If a
          document, specify a replica-set members document, as found in the
          :data:`~local.system.replset.members` array. To view a replica set's
          members array, run :method:`rs.conf()`.
          
          
   
      * - ``arbiterOnly``
   
        - boolean
   
        - Optional. Applies only if the ``<host>`` value is a string. If ``true``, the
          added host is an arbiter."
          
          
   


   You may specify new hosts in one of two ways:

   #. as a "hostname" with an optional port number to use the default
      configuration as in the :ref:`replica-set-add-member` example.

   #. as a configuration :term:`document`, as in the
      :ref:`replica-set-add-member-alternate-procedure` example.

   :method:`rs.add()` provides a wrapper around some of the
   functionality of the ":dbcommand:`replSetReconfig`" :term:`database
   command` and the corresponding shell helper
   :method:`rs.reconfig()`. See the :doc:`/reference/replica-configuration`
   document for full documentation of all replica set configuration
   options.

Behavior
--------

:method:`rs.add()` can in some cases force an election for primary
which will disconnect the shell. In such cases, the shell displays
an error even if the operation succeeds.

Example
-------

To add a :binary:`~bin.mongod` accessible on the default port
``27017`` running on the host ``mongodb3.example.net``, use the
following :method:`rs.add()` invocation:

.. code-block:: javascript

   rs.add('mongodb3.example.net:27017')

If ``mongodb3.example.net`` is an arbiter, use the following form:

.. code-block:: javascript

   rs.add('mongodb3.example.net:27017', true)

To add ``mongodb3.example.net`` as a :ref:`secondary-only
<replica-set-secondary-only-members>` member of set, use the
following form of :method:`rs.add()`:

.. code-block:: javascript

   rs.add( { "_id": 3, "host": "mongodbd3.example.net:27017", "priority": 0 } )

Replace, ``3`` with the next unused ``_id`` value in the replica
set. See :method:`rs.conf()` to see the existing ``_id`` values
in the replica set configuration document.

See the :doc:`/reference/replica-configuration` and
:doc:`/administration/replica-sets` documents for more
information.
