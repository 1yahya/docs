====================
sh.shardCollection()
====================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Definition
----------

.. method:: sh.shardCollection(namespace, key, unique)

   Shards a collection using the ``key`` as a the :term:`shard
   key`. :method:`sh.shardCollection()` takes the following arguments:


   .. list-table::
      :header-rows: 1
      :widths: 20 20 80
   
      * - Parameter
   
        - Type
   
        - Description
   
      * - ``namespace``
   
        - string
   
        - The :term:`namespace` of the collection to shard.
          
          
   
      * - ``key``
   
        - document
   
        - A :term:`document` that specifies the :term:`shard key` to use to
          :term:`partition` and distribute objects among the shards. A shard key
          may be one field or multiple fields. A shard key with multiple fields
          is called a "compound shard key."
          
          
   
      * - ``unique``
   
        - Boolean
   
        - When true, ensures that the underlying index enforces a unique
          constraint. :term:`Hashed shard keys <hashed shard key>` do not
          support unique constraints.
          
          
   


   .. todo:: add note about creating the shard key index if the
      collection is empty or failing if the collection has data and no
      shard key index.

   .. versionadded:: 2.4
      Use the form ``{field: "hashed"}`` to create a
      :term:`hashed shard key <hashed shard key>`.
      Hashed shard keys may not be compound indexes.

Considerations
--------------

.. include:: /includes/fact-cannot-unshard-collection.rst

Example
-------

Given the ``people`` collection in the ``records`` database, the
following command shards the collection by the ``zipcode`` field:

.. code-block:: javascript

   sh.shardCollection("records.people", { zipcode: 1} )

Additional Information
----------------------

:dbcommand:`shardCollection` for additional options,
:doc:`/sharding` and :doc:`/core/sharding-introduction` for an
overview of sharding, :doc:`/tutorial/deploy-shard-cluster` for a
tutorial, and :ref:`sharding-shard-key` for choosing a shard key.
